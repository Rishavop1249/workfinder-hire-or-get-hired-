<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Posted Jobs</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD6z7reXcmqHUHxy...GIZbNTGxHwI",
      authDomain: "work-finder-e492d.firebaseapp.com",
      projectId: "work-finder-e492d",
      storageBucket: "work-finder-e492d.appspot.com",
      messagingSenderId: "590061410491",
      appId: "1:590061410491:web:140bce05c286e7ed4b719e",
      measurementId: "G-8L76SWYTJE"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<header class="navbar">
  <h1>WorkFinder</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="browse.html">Browse Jobs</a>
    <a href="post.html">Post a Job</a>
    <a href="settings.html">Settings</a>
    <a href="#" onclick="localStorage.removeItem('user');location.href='login.html'">Logout</a>
  </nav>
</header>
<main class="form-section">
  <h2>Your Posted Jobs</h2>
  <ul id="job-list"></ul>
</main>
<script>
const user = JSON.parse(localStorage.getItem('user'));
if (!user) location.href = 'login.html';

db.collection('jobs').where('postedBy', '==', user.name).get().then(function(snap) {
  const ul = document.getElementById('job-list');
  snap.forEach(function(doc) {
    const job = doc.data();
    const li = document.createElement('li');
    li.innerHTML = `<strong>${job.title}</strong> - ${job.company} 
      <button onclick="edit('${doc.id}')">Edit</button> 
      <button onclick="remove('${doc.id}')">Remove</button>`;
    ul.appendChild(li);
  });
});

function edit(id) {
  const t = prompt('New title:');
  if (t) db.collection('jobs').doc(id).update({ title: t });
}

function remove(id) {
  if (confirm('Delete?')) {
    db.collection('jobs').doc(id).delete().then(() => location.reload());
  }
}
</script>
</body>
</html>